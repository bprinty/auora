<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Guide | Auora</title>
    <meta name="description" content="🦄 ~ Another state manager ~ 🔥">
    <meta name="generator" content="VuePress 1.3.1">
    <link rel="icon" href="/auora/icons/favicon.ico">
    
    <link rel="preload" href="/auora/assets/css/0.styles.86bace7d.css" as="style"><link rel="preload" href="/auora/assets/js/app.1e2add5a.js" as="script"><link rel="preload" href="/auora/assets/js/2.ed3f492f.js" as="script"><link rel="preload" href="/auora/assets/js/11.02035c46.js" as="script"><link rel="prefetch" href="/auora/assets/js/10.3076a4b0.js"><link rel="prefetch" href="/auora/assets/js/12.69fc285a.js"><link rel="prefetch" href="/auora/assets/js/13.b8809874.js"><link rel="prefetch" href="/auora/assets/js/14.bac406af.js"><link rel="prefetch" href="/auora/assets/js/3.af0c71fe.js"><link rel="prefetch" href="/auora/assets/js/4.5a4318b6.js"><link rel="prefetch" href="/auora/assets/js/5.55dfc4db.js"><link rel="prefetch" href="/auora/assets/js/6.904b3f38.js"><link rel="prefetch" href="/auora/assets/js/7.deb40130.js"><link rel="prefetch" href="/auora/assets/js/8.f60e2de7.js"><link rel="prefetch" href="/auora/assets/js/9.3f1e926d.js">
    <link rel="stylesheet" href="/auora/assets/css/0.styles.86bace7d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/auora/" class="home-link router-link-active"><!----> <span class="site-name">Auora</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/bprinty/auora" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/bprinty/auora" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/auora/overview/" class="sidebar-link">Overview</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/auora/overview/#prerequisites" class="sidebar-link">Prerequisites</a></li><li class="sidebar-sub-header"><a href="/auora/overview/#quickstart" class="sidebar-link">Quickstart</a></li><li class="sidebar-sub-header"><a href="/auora/overview/#table-of-contents" class="sidebar-link">Table of Contents</a></li><li class="sidebar-sub-header"><a href="/auora/overview/#additional-resources" class="sidebar-link">Additional Resources</a></li></ul></li><li><a href="/auora/setup/" class="sidebar-link">Setup</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/auora/setup/#install-in-project" class="sidebar-link">Install in Project</a></li><li class="sidebar-sub-header"><a href="/auora/setup/#use-via-cdn" class="sidebar-link">Use via CDN</a></li><li class="sidebar-sub-header"><a href="/auora/setup/#configuration" class="sidebar-link">Configuration</a></li><li class="sidebar-sub-header"><a href="/auora/setup/#options" class="sidebar-link">Options</a></li></ul></li><li><a href="/auora/guide/" class="active sidebar-link">Guide</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/auora/guide/#concepts" class="sidebar-link">Concepts</a></li><li class="sidebar-sub-header"><a href="/auora/guide/#store" class="sidebar-link">Store</a></li><li class="sidebar-sub-header"><a href="/auora/guide/#state" class="sidebar-link">State</a></li><li class="sidebar-sub-header"><a href="/auora/guide/#actions" class="sidebar-link">Actions</a></li><li class="sidebar-sub-header"><a href="/auora/guide/#getters" class="sidebar-link">Getters</a></li><li class="sidebar-sub-header"><a href="/auora/guide/#events" class="sidebar-link">Events</a></li><li class="sidebar-sub-header"><a href="/auora/guide/#mutations" class="sidebar-link">Mutations</a></li></ul></li><li><a href="/auora/patterns/" class="sidebar-link">Patterns</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/auora/patterns/#application-structure" class="sidebar-link">Application Structure</a></li><li class="sidebar-sub-header"><a href="/auora/patterns/#modules" class="sidebar-link">Modules</a></li><li class="sidebar-sub-header"><a href="/auora/patterns/#dynamic-registration" class="sidebar-link">Dynamic Registration</a></li></ul></li><li><a href="/auora/examples/" class="sidebar-link">Examples</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/auora/examples/#vue" class="sidebar-link">Vue</a></li><li class="sidebar-sub-header"><a href="/auora/examples/#angular" class="sidebar-link">Angular</a></li><li class="sidebar-sub-header"><a href="/auora/examples/#react" class="sidebar-link">React</a></li></ul></li><li><a href="/auora/api/" class="sidebar-link">API</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/auora/api/#event-management" class="sidebar-link">Event Management</a></li><li class="sidebar-sub-header"><a href="/auora/api/#store" class="sidebar-link">Store</a></li><li class="sidebar-sub-header"><a href="/auora/api/#observable" class="sidebar-link">Observable</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="guide"><a href="#guide" class="header-anchor">#</a> Guide</h1> <p>Below, we'll cover some core concepts that should be understood about state management, and how this library can make state management simpler.</p> <h2 id="concepts"><a href="#concepts" class="header-anchor">#</a> Concepts</h2> <p>The core concepts that need to be understood when using this module (as with most state managers) are:</p> <ul><li><a href="#store">Store</a> - The central manager for accessing state and <strong>dispatching</strong> actions.</li> <li><a href="#state">State</a> - The global source of truth for data models in the application.</li> <li><a href="#actions">Actions</a> - Synchronous or asynchronous processes that can change state.</li> <li><a href="#getters">Getters</a> - Functions for computing derived state (with caching between state changes).</li> <li><a href="#events">Events</a> - Callbacks that execute after specific <em>events</em> that happen throughout the state management lifecycle.</li></ul> <h3 id="the-central-dogma-of-state-management"><a href="#the-central-dogma-of-state-management" class="header-anchor">#</a> The Central Dogma of State Management</h3> <p>If you've taken any biology classes, you've probably heard of the &quot;Central Dogma of Molecular Biology&quot;. State management has a similar dogma that holds true across any application:</p> <img src="/auora/central-dogma.png" width="700px" alt="Central Dogma of State Management"> <p>Most reactive web applications also connect to an external service for sending/receiving data (e.g. REST API), which makes can make this process difficult to manage without an abstraction.</p> <h3 id="why-use-a-state-manager"><a href="#why-use-a-state-manager" class="header-anchor">#</a> Why Use a State Manager?</h3> <p>If you've built large applications with components and interactivity, you've likely used a state manager and understand the value. If you haven't, using a state manager is a way of simplifying the management of data and flow of events throughout your application. The diagram below shows an intuitive representation of the difference between an application without (left) and with (right) an application store:</p> <img src="/auora/state-network.png" width="700px" alt="State Network"> <p>Without a centralized state manager, components must be responsible for dispatching to other components to re-render a view, which can increase the difficulty in maintaining a codebase. Web application development can be complex, and state managers like this one are a way to abstract some of that complexity so code can be written in a more sustainable way.</p> <h2 id="store"><a href="#store" class="header-anchor">#</a> Store</h2> <p>The <strong>Store</strong> is a singular entry-point for accessing state data, dispatching actions that update state, and publishing events that happen throughout the store lifecycle. Expanding on the <a href="#the-central-dogma-of-state-management">central dogma</a> diagram above, a store manages data changes (and cascading view changes) like:</p> <img src="/auora/store-concept.png" width="600px" alt="Store Concept"> <p>All of the <strong>state</strong>, <strong>actions</strong>, and <strong>events</strong> are managed by the store, so views and components can be developed in an isolated way.</p> <p>To create a store with this library, you simply need to define the <strong>state</strong> and <strong>actions</strong> that the store should manage. For example, here is a store definition showing all types of configuration for a <code>counter</code> application (if you've used <code>Vuex</code> before, you'll be familiar with the syntax):</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// state</span>
  state<span class="token operator">:</span> <span class="token punctuation">{</span>
    count<span class="token operator">:</span> <span class="token number">0</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">// actions</span>
  actions<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">increment</span><span class="token punctuation">(</span><span class="token parameter">store</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        store<span class="token punctuation">.</span>count <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">// events</span>
  events<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">commit</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">[INFO] Counter value is \`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>state<span class="token punctuation">.</span>counter<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">\`</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">[INFO] Finished executing action \`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>action<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">\`</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>The purpose of the store above is to:</p> <ol><li>Store a <code>count</code> variable that can update throughout the application.</li> <li>Create async <code>actions</code> that can change state.</li> <li>Bind callbacks to specific <code>events</code> that happen throughout data changes.</li></ol> <p>And once this is defined, you can use the store throughout your application like so:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0</span>

store<span class="token punctuation">.</span>apply<span class="token punctuation">.</span><span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// [INFO] Counter value is `1`</span>
<span class="token comment">// [INFO] Finished executing action `increment`</span>
</code></pre></div><p>Now that we've described a high-level example of how to configure a <a href="#store">Store</a>, let's go into detail on how each component of a store can be configured.</p> <p>If you understand the core concepts and want to quickly jump into real-world examples, see the <a href="/auora/examples/">Examples</a> section of the documentation.</p> <h2 id="state"><a href="#state" class="header-anchor">#</a> State</h2> <p>As mentioned before, <code>state</code> is the global source of truth for your application. Examples of data state parameters can store include:</p> <ol><li>User profile metadata.</li> <li>Collections of model data for a specific view.</li> <li>User settings that affect how views display information.</li></ol> <p>When rendering, views read from <code>state</code> and upon user interaction, run functions that update state:</p> <img src="/auora/state-concept.png" width="500px" alt="State Concept"> <p>State for a store can be as simple as:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token punctuation">{</span>
  counter<span class="token operator">:</span> <span class="token number">0</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>Or as complex as:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token punctuation">{</span>
  profile<span class="token operator">:</span> <span class="token punctuation">{</span>
    username<span class="token operator">:</span> <span class="token string">'me'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
  posts<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> title<span class="token operator">:</span> <span class="token string">'Foo'</span><span class="token punctuation">,</span> body<span class="token operator">:</span> <span class="token string">'&lt;div&gt;foo&lt;/div&gt;'</span><span class="token punctuation">,</span> author_id<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> title<span class="token operator">:</span> <span class="token string">'Bar'</span><span class="token punctuation">,</span> body<span class="token operator">:</span> <span class="token string">'&lt;div&gt;bar&lt;/div&gt;'</span><span class="token punctuation">,</span> author_id<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  authors<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'Jane Doe'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>The most important thing to understand about state is that <strong>it should not be changed directly</strong>.</p> <div class="custom-block tip"><p class="custom-block-title">NOTE</p> <p>State should <strong>not be changed directly</strong>. All state parameters should be changed within <a href="#actions">Actions</a>.</p></div> <p>All state variables should be set within actions. Reasoning behind this and the flow of events that happen during state updates is detailed in the <a href="#actions">Actions</a> section below.</p> <h3 id="defining-state"><a href="#defining-state" class="header-anchor">#</a> Defining State</h3> <p>To define a state parameter for your application, create a plain object and bind it to a <strong>Store</strong>:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Store <span class="token punctuation">}</span> <span class="token keyword">from</span> auora<span class="token punctuation">;</span>

<span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token punctuation">{</span>
  myParam<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
  myObject<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  myArray<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span> state <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Defaults you define as a part of state will be the default values immediately available in your application. All values must be plain objects.</p> <div class="custom-block tip"><p class="custom-block-title">NOTE</p> <p>State and state values <strong>must be plain objects</strong>. State is meant to warehouse data, not functionality.</p></div> <h3 id="using-state"><a href="#using-state" class="header-anchor">#</a> Using State</h3> <p>In an application, you can use state as any other variable. Here is an example of how to use state in a <a href="/auora/examples/">Vue</a> component:</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>{{ count }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'Counter'</span><span class="token punctuation">,</span>
  store<span class="token operator">:</span> <span class="token punctuation">{</span>
    state<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'count'</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>For examples of how to use state in other front-end frameworks, see the <a href="/auora/examples/">Examples</a> section of the documentation.</p> <h3 id="changing-state"><a href="#changing-state" class="header-anchor">#</a> Changing State</h3> <p>State should generally be changed within an <a href="#actions">Action</a>. For example, here is an action that changes the <code>counter</code> state from the example above:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  state<span class="token operator">:</span> <span class="token punctuation">{</span>
    counter<span class="token operator">:</span> <span class="token number">0</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  actions<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">increment</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> state <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      state<span class="token punctuation">.</span>counter <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// using action to change state</span>
store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>counter <span class="token comment">// 0</span>
store<span class="token punctuation">.</span>apply<span class="token punctuation">.</span><span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>counter <span class="token comment">// 1</span>
</code></pre></div><p>Although possible, <strong>it's highly recommended to not change state outside of actions or mutations</strong>. Some other general guidelines for safely changing state <strong>within</strong> actions to avoid unwanted consequences include:</p> <ol><li>Declare all top-level state placeholders when instantiating the store.</li> <li>Don't change properties for nested data structures directly - use the operator spread syntax when updating data.</li></ol> <p>Each of these is explained in more detail within the sections immediately below.</p> <h4 id="state-placeholders"><a href="#state-placeholders" class="header-anchor">#</a> State Placeholders</h4> <p>If your store contains multiple data models, be sure to configure your store an empty object for each model. For example:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">new</span> <span class="token class-name">Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  state<span class="token operator">:</span> <span class="token punctuation">{</span>
    authors<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    posts<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    comments<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>This helps the <code>Store</code> object know how to handle nested data updates during state transactions.</p> <h4 id="changing-nested-data"><a href="#changing-nested-data" class="header-anchor">#</a> Changing Nested Data</h4> <p>When changing deeply nested data structures, replace any nested objects with a fresh one. For example, if you're managing data for your store at the top level, avoid this type of state change inside actions:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// DONT</span>
state<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>done <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
</code></pre></div><p>Instead, use the operator spread syntax when updating nested data:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// DO</span>
state<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span> done<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token operator">...</span>state<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// or</span>
state<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> state<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> done<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>You can use the same pattern when changing nested data. For instance, if you declare the initial state for your store using:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  state<span class="token operator">:</span> <span class="token punctuation">{</span>
    todos<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>Change <code>todos</code> data inside actions using the same type of assignment:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// inside of action</span>
state<span class="token punctuation">.</span>todos<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span> done<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token operator">...</span>state<span class="token punctuation">.</span>todos<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>Changing nested data this way will help with frameworks who provide reactivity on data updates (i.e. Vue), and will also ensure that <a href="#transactions">State Transactions</a> process as expected. If you aren't dealing with a large dataset and want to be able to make state changes without worrying about object assignment, you can set the <code>recurse</code> Store option to <code>true</code> (see the <a href="/auora/setup/#configuration">Configuration</a> section for more information).</p> <h2 id="actions"><a href="#actions" class="header-anchor">#</a> Actions</h2> <p>At the top of the chain for cascading state changes are <code>actions</code>. When a user interacts with a page, they trigger <em>actions</em> that update <em>state</em>. Actions represent more complex functionality that can change data across one or multiple state parameters in several stages. Examples of actions that trigger on user interaction include:</p> <ol><li><em>PUT</em> requests to update user profile metadata.</li> <li><em>POST</em> requests to create a new model in a collection.</li> <li><em>GET</em> requests for fetching user settings information.</li></ol> <p>Although actions will commonly wrap communication with an external service (i.e. REST API), they don't have to. They can also be either <strong>syncronous</strong> or <strong>asynchronous</strong>.</p> <p>Since actions can be complex and change state in many different ways, and accordingly provide guardrails around state changes throughout the lifecycle of an action. Here is a diagram detailing execution flow during an action:</p> <img id="action-flow" src="/auora/action-flow.png" width="600px" alt="Action Flow"> <p>The diagram above is pretty busy, but fully captures what happens as an action is executed. The imporant takeaway from this diagram is that actions <strong>wrap state updates in transactions</strong> so that errors that occur in the middle of action execution trigger a rollback to the previous state.</p> <h3 id="defining-actions"><a href="#defining-actions" class="header-anchor">#</a> Defining Actions</h3> <p>To define actions that can be used throughout your application, create a plain object with the actions and bind it to a <strong>Store</strong>. In this example, we'll connect a counter to an external API:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Store <span class="token punctuation">}</span> <span class="token keyword">from</span> auora<span class="token punctuation">;</span>

<span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token punctuation">{</span>
  count<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> actions <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">increment</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> state <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/counter/increment'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">response</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      state<span class="token punctuation">.</span>counter <span class="token operator">=</span> response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> state <span class="token punctuation">}</span><span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/counter/add'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> value <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">response</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      state<span class="token punctuation">.</span>counter <span class="token operator">=</span> response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span> state<span class="token punctuation">,</span> actions <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>There are also alternative ways of defining actions that can fit better into different types of application architectures. See the <a href="#patterns">Patterns</a> section below for more information about how you can define and organize actions in a large project.</p> <h3 id="using-actions"><a href="#using-actions" class="header-anchor">#</a> Using Actions</h3> <p>Actions should be triggered throughout your application whenever a user interacts with a view. To directly execute an action, you can call it directly using the <code>apply</code> method on <code>Store</code> objects:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>store<span class="token punctuation">.</span>apply<span class="token punctuation">.</span><span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">response</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'[INFO] Incremented counter and updated store!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">await</span> store<span class="token punctuation">.</span>apply<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>You can also use the <code>dispatch</code> syntax for dispatching actions (as in other state managers). The above code is equivalent to:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'increment'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">response</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'[INFO] Incremented counter and updated store!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">await</span> store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'add'</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>In an application, you should bind actions to user interaction on a view. Here is an example of how to use actions in a <a href="/auora/examples/">Vue</a> component:</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>{{ count }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>increment<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Increment Counter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>add(5)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Add 5 to Counter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'Counter'</span><span class="token punctuation">,</span>
  store<span class="token operator">:</span> <span class="token punctuation">{</span>
    state<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'count'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    actions<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'increment'</span><span class="token punctuation">,</span> <span class="token string">'add'</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>For examples of how to dispatch actions in other front-end frameworks, see the <a href="/auora/examples/">Examples</a> section of the documentation.</p> <h3 id="transactions"><a href="#transactions" class="header-anchor">#</a> Transactions</h3> <p>Other state management libraries use the concept of <code>mutations</code> to manage explicitly committing changes to store. Although the concept of committing to <code>state</code> is necessary, it's not functionality users should worry about when building a state manager. Instead, this library uses the concept of <em>State Transactions</em> to manage.</p> <p>During actions or other operations that change state, the store maintains a hot replica of the <code>state</code> in an internal <code>stage</code> object. When actions are dispatched, the <code>stage</code> object is passed into actions in lieu of <code>state</code>, and after actions are executed, is either used to commit new changes to the store or rollback the <code>stage</code> to match the current <code>state</code>.</p> <p>Here is a sequence diagram that describes this process:</p> <img id="transaction-concept" src="/auora/transaction-concept.png" width="600px" alt="Transaction Concept"> <p>Because of this internal abstraction, instead of needing to define mutations for changing state:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// not necessary (lots of boilerplate)</span>
<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  state<span class="token operator">:</span> <span class="token punctuation">{</span> count<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  mutations<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token constant">SET_COUNT</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      state<span class="token punctuation">.</span>count <span class="token operator">=</span> value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  actions<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">increment</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> commit<span class="token punctuation">,</span> state <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'SET_COUNT'</span><span class="token punctuation">,</span> state<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>You can just change state directly in actions, without defining any specific state-changing mutations.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// much less boilerplate</span>
<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  state<span class="token operator">:</span> <span class="token punctuation">{</span> count<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  actions<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">increment</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> state <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      state<span class="token punctuation">.</span>count <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>And in doing so, you're protected against unwanted state changes propagating throughout your application. For example:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  state<span class="token operator">:</span> <span class="token punctuation">{</span> count<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  actions<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">errorAction</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> state <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      state<span class="token punctuation">.</span>count <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Error!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

store<span class="token punctuation">.</span>apply<span class="token punctuation">.</span><span class="token function">errorAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Error!</span>
store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>count <span class="token comment">// 0</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">NOTE</p> <p>See the <a href="#changing-state">Changing State</a> section above for more information on how to safely make state changes in a way that doesn't result in unwanted side-effects.</p></div> <p>If you need to commit intermediate changes to <code>state</code> inside of an action, you can still do so with the <code>store.flush()</code> method. For example, if we need to set the state for a <code>loading</code> variable while a request is issued, we can use:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  state<span class="token operator">:</span> <span class="token punctuation">{</span>
    loading<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    count<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  actions<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">errorRequest</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> state<span class="token punctuation">,</span> flush <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      state<span class="token punctuation">.</span>loading <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
      <span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// flush changes to state</span>
      <span class="token keyword">return</span> axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/missing-url'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        state<span class="token punctuation">.</span>count <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">finally</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        state<span class="token punctuation">.</span>loading <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> promise <span class="token operator">=</span> store<span class="token punctuation">.</span>apply<span class="token punctuation">.</span><span class="token function">errorRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>loading <span class="token comment">// true</span>
<span class="token keyword">await</span> promise
store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>loading <span class="token comment">// false</span>
store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>count <span class="token comment">// 0</span>
</code></pre></div><h3 id="composing-actions"><a href="#composing-actions" class="header-anchor">#</a> Composing Actions</h3> <p>For more complex use-cases, it can be useful for actions to dispatch to other actions during execution. For this, you can <em>compose</em> actions by using <code>apply</code> to dispatch other actions within an action. For example:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  state<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  actions<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">actionA</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> apply <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// code specific to actionA</span>
      <span class="token keyword">return</span> apply<span class="token punctuation">.</span><span class="token function">actionB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">actionB</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> state <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// code for actionB</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Composing async actions is just as simple:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  state<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  actions<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">actionA</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> apply <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> apply<span class="token punctuation">.</span><span class="token function">actionB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// process actionB results in a different way</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">actionB</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> state <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// code for actionB</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Finally, with async/await syntax:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  state<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  actions<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token keyword">async</span> <span class="token function">actionA</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> apply <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> apply<span class="token punctuation">.</span><span class="token function">actionB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// process actionB results in a different way</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">actionB</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> state <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// code for actionB</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">NOTE</p> <p>When actions are composed, state transactions are not committed until the original parent action finishes. All nested actions will change the internal store <code>stage</code> object and a transaction with all the changes will happen at the end. This is designed to help protect against unwanted side effects with in-flight state changes within an action.</p></div> <h2 id="getters"><a href="#getters" class="header-anchor">#</a> Getters</h2> <p>As mentioned before, <code>getters</code> are ways of computing derived state when state changes are made. For property-style getters, results are <strong>cached</strong> between state updates to make getter execution highly performant.</p> <h3 id="defining-getters"><a href="#defining-getters" class="header-anchor">#</a> Defining Getters</h3> <p>To define a getter for your store, create a plain object with <em>getter functions</em> and bind it to your <strong>Store</strong>:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  state<span class="token operator">:</span> <span class="token punctuation">{</span> count<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  getters<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">negCount</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> state<span class="token punctuation">.</span>count <span class="token operator">*</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// using getter</span>
store<span class="token punctuation">.</span>get<span class="token punctuation">.</span>netCount <span class="token comment">// -1</span>
</code></pre></div><p>Getter functions accept <code>state</code> as their <strong>only</strong> argument and should return some type of derived state.</p> <div class="custom-block tip"><p class="custom-block-title">NOTE</p> <p>Getters <strong>must not change state in any way</strong>. Getters are meant to summarize data, not change it.</p></div> <h3 id="getters-with-arguments"><a href="#getters-with-arguments" class="header-anchor">#</a> Getters with Arguments</h3> <p>For applications that require more complex getters, you can return a function for computing derived state. For instance, if we wanted to define a getter to return the current count plus some extra value, we could use:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  state<span class="token operator">:</span> <span class="token punctuation">{</span> count<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  getters<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">countPlus</span><span class="token operator">:</span> <span class="token parameter">state</span> <span class="token operator">=&gt;</span> <span class="token parameter">number</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> state<span class="token punctuation">.</span>count <span class="token operator">+</span> number<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Which would then allow us to utilize the getter in a functional way like so:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>store<span class="token punctuation">.</span>get<span class="token punctuation">.</span><span class="token function">countPlus</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token comment">// 5</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">NOTE</p> <p>Getter results will <strong>not be cached</strong> if getter functions return a nested function.</p></div> <h3 id="using-getters"><a href="#using-getters" class="header-anchor">#</a> Using Getters</h3> <p>Expanding more upon how to use getters, let's say we have the following store (where we've defined two types of getters):</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Auora</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  state<span class="token operator">:</span> <span class="token punctuation">{</span>
    items<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> foo<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> foo<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  getters<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">foos</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> state<span class="token punctuation">.</span>items<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>foo<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">byId</span><span class="token operator">:</span> <span class="token parameter">state</span> <span class="token operator">=&gt;</span> <span class="token parameter">id</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> state<span class="token punctuation">.</span>items<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>id <span class="token operator">===</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>We can use each type of getter like so:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// property-style getter</span>
store<span class="token punctuation">.</span>get<span class="token punctuation">.</span>foos <span class="token comment">// [{id: 1, foo: true}]</span>

<span class="token comment">// function-style getter</span>
store<span class="token punctuation">.</span>get<span class="token punctuation">.</span><span class="token function">byId</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// {id: 2, foo: false}</span>
</code></pre></div><p>In an application, you can use getters just like any other variable. Here is an example of how to use getters in a <a href="/auora/examples/">Vue</a> component:</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>{{ foos.length }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'Foo Number'</span><span class="token punctuation">,</span>
  store<span class="token operator">:</span> <span class="token punctuation">{</span>
    getters<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'foos'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>For examples of how to use getters in other front-end frameworks, see the <a href="/auora/examples/">Examples</a> section of the documentation.</p> <h2 id="events"><a href="#events" class="header-anchor">#</a> Events</h2> <p>Now that we've covered the machinery to manage a data <a href="#store">Store</a>, let's talk about how to subscribe to events that take place throughout the lifecycle of store operations.</p> <p>This package internally uses a <a href="https://en.wikipedia.org/wiki/Publish%E2%80%93subscribe_pattern" target="_blank" rel="noopener noreferrer">Publish-Subscribe<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> pattern that users can subscribe to for executing functions when specific types of events take place. If you've seen the diagrams <a href="#action-flow">above</a>, you're already somewhat familiar with events that are broadcasted (<em>published</em>) throughout store operations.</p> <p>The following global events are <em>published</em> throughout the execution of store operations:</p> <table><thead><tr><th>Event</th> <th>Description</th></tr></thead> <tbody><tr><td><code>idle</code></td> <td>Execute when the state manager goes back into an <code>idle</code> state (no action, mutation, or state change is taking place).</td></tr> <tr><td><code>reset</code></td> <td>Execute after any <code>reset</code> operation takes place (i.e. <code>store.reset()</code>)</td></tr> <tr><td><code>commit</code></td> <td>Execute after state changes are committed to the store.</td></tr> <tr><td><code>rollback</code></td> <td>Execute after any <code>rollback</code> operation takes place.</td></tr> <tr><td><code>dispatch</code></td> <td>Execute after any <code>action</code> is dispatched.</td></tr> <tr><td><code>mutate</code></td> <td>Execute after any <code>mutation</code> is committed.</td></tr></tbody></table> <p>To subscribe to these global events, use the <code>subscribe</code> method on <code>Store</code> objects:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>store<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token string">'action'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> action<span class="token punctuation">,</span> input</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">[INFO] Action \`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>action<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">\`dispatched with input \`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>input<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">\`!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">await</span> store<span class="token punctuation">.</span>apply<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// [INFO] Action `add` dispatched with input `1`!</span>
</code></pre></div><p>Here's a more complete example showing subscriptions to the majority of event types:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// idle</span>
store<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token string">'idle'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'[INFO] Store back to idle.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// commit</span>
store<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token string">'commit'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">[INFO] State has been updated!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// dispatch\</span>
store<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token string">'dispatch'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> action<span class="token punctuation">,</span> input</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">[INFO] Action \`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>action<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">\` dispatched with input \`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>input<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">\`</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">// dispatch action to show event publishing</span>
<span class="token keyword">await</span> store<span class="token punctuation">.</span>apply<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/*
[INFO] State has been updated!.
[INFO] Action `add` dispatched with input `5`.
[INFO] Store back to idle.
*/</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">NOTE</p> <p>Note that the code above is subscribing to the <em>termination</em> of <strong>state</strong>, <strong>mutation</strong>, and <strong>action</strong> execution.</p></div> <h3 id="defining-events"><a href="#defining-events" class="header-anchor">#</a> Defining Events</h3> <p>As you might remember from other sections of the documentation, defining events when instantiating a <strong>Store</strong> is possible with the <code>events</code> keyword. The <code>events</code> block is where you can subscribe to <strong>global</strong> events like <code>dispatch</code>, <code>reset</code>, <code>commit</code>, etc... . For example:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Store <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'auora'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  state<span class="token operator">:</span> <span class="token punctuation">{</span>
    count<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  actions<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">increment</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> state <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      state<span class="token punctuation">.</span>counter <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> state<span class="token punctuation">.</span>counter<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  events<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">commit</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> newValue<span class="token punctuation">,</span> oldValue</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      state<span class="token punctuation">.</span>history<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>state<span class="token punctuation">.</span>counter<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> action<span class="token punctuation">,</span> <span class="token operator">...</span>payload</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      state<span class="token punctuation">.</span>operations<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> action<span class="token punctuation">,</span> payload <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="mutations"><a href="#mutations" class="header-anchor">#</a> Mutations</h2> <p>In short, <code>mutations</code> are functions that update <code>state</code>. They wrap specific types of updates to a <code>state</code> parameter and provide structure around state modifications and the associated downstream effects. Examples of mutations that change state include:</p> <ol><li>Updating user profile metadata after a request.</li> <li>Adding a model to a collection of models.</li> <li>Changing a user settings value.</li></ol> <div class="custom-block warning"><p class="custom-block-title">NOTE</p> <p>Defining and using mutations isn't necessary or recommended when using this library. This concept is included to create parity with existing state management architectures so code can easily be migrated over time.</p></div> <p>Mutations are used within API functions to update <em>state</em> and broadcast updates. Execution flow during a mutation looks something like this:</p> <img src="/auora/mutation-flow.png" width="500px" alt="Mutation Flow"> <p>As you can see in the diagram above, mutations broadcast events throughout execution that parts of an application can hook into. Although not directly shown in the diagram, it is important to understand that <strong>mutations</strong> should be <strong>syncronous</strong> operations.</p> <div class="custom-block tip"><p class="custom-block-title">NOTE</p> <p>All mutations should be <strong>syncronous</strong> operations. Asynchronous operations that update a store should be concfigured as <a href="#actions">Actions</a>.</p></div> <p>For more information on how to use <strong>asynchronous</strong> operations that commit mutations, see the <a href="#actions">Actions</a> section below.</p> <h3 id="defining-mutations"><a href="#defining-mutations" class="header-anchor">#</a> Defining Mutations</h3> <p>To define a mutations for your application, create a plain object with the mutations and bind it to a <strong>Store</strong>:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Store <span class="token punctuation">}</span> <span class="token keyword">from</span> auora<span class="token punctuation">;</span>

<span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token punctuation">{</span>
  counter<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> mutations <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">increment</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    state<span class="token punctuation">.</span>counter <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    state<span class="token punctuation">.</span>counter <span class="token operator">+=</span> value<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span> state<span class="token punctuation">,</span> mutations <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Inputs to mutation functions include a copy of the <code>state</code> and any arguments passed to the mutation when <code>commit</code> is called.</p> <h3 id="pre-defined-mutations"><a href="#pre-defined-mutations" class="header-anchor">#</a> Pre-defined Mutations</h3> <p>When state variables are declared with this library, the following mutations are automatically created:</p> <table><thead><tr><th>Name</th> <th>Purpose</th></tr></thead> <tbody><tr><td><code>&lt;param&gt;</code></td> <td>Set the value of the state param.</td></tr></tbody></table> <p>These auto-generated mutations remove a lot of the boilerplate required for other libraries. For example, here is how you can quickly get up and running without configuring mutations for each state parameter:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span> state<span class="token operator">:</span> <span class="token punctuation">{</span> counter<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// set value of counter to 5</span>
store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'counter'</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// increment counter</span>
store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'counter'</span><span class="token punctuation">,</span> store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>counter <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// reset state counter</span>
store<span class="token punctuation">.</span><span class="token function">reset</span><span class="token punctuation">(</span><span class="token string">'counter'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="using-mutations"><a href="#using-mutations" class="header-anchor">#</a> Using Mutations</h3> <p>In an application, you should use mutations inside methods that execute when a user interacts with a view. To use a mutation, you use the <code>commit</code> method on <code>Store</code> objects:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'increment'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'add'</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Here is an example of how to use mutations in a <a href="/auora/examples/">Vue</a> component:</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>{{ counter }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>increment<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Increment Counter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>reset<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Reset Counter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'counter'</span><span class="token punctuation">,</span>
  store<span class="token operator">:</span> <span class="token punctuation">{</span>
    state<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'counter'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    mutations<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'increment'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">methods</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">reset</span><span class="token punctuation">(</span><span class="token string">'counter'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>For examples of how to commit mutations in other front-end frameworks, see the <a href="/auora/examples/">Examples</a> section of the documentation.</p> <hr> <hr> <br> <div class="custom-block danger"><p class="custom-block-title">THAT'S IT!</p> <p>You've reached the end of the user guide. Thanks for reading until the end!</p></div> <p>If you have any questions that aren't answered by this documentation, feel free to file a <code>documentation</code> issue in the <a href="https://github.com/bprinty/auora" target="_blank" rel="noopener noreferrer">GitHub Issue Tracker<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> for this project.</p> <style>
.badge {
  display: inline-block;
  font-size: 20px;
  font-family: monospace;
  height: 28px;
  line-height: 28px;
  border-radius: 3px;
  padding: 0 6px;
  color: #fff;
  background-color: #42b983;
}
.scoped .badge,
blockquote .badge {
  font-size: 15px;
  height: 23px;
  line-height: 23px;
}
.badge.warning {
  background-color: #e7c000;
}
.badge.error {
  background-color: #da5961;
}
.badge.tip {
  background-color: #42b983;
}
blockquote.scoped.warning {
  border-color: #e7c000;
}
blockquote.scoped.error {
  border-color: #da5961;
}
blockquote.scoped.tip {
  border-color: #42b983;
}

</style></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/bprinty/auora/edit/master/docs/guide/README.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">5/8/2020, 7:11:23 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/auora/setup/" class="prev">
        Setup
      </a></span> <span class="next"><a href="/auora/patterns/">
        Patterns
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/auora/assets/js/app.1e2add5a.js" defer></script><script src="/auora/assets/js/2.ed3f492f.js" defer></script><script src="/auora/assets/js/11.02035c46.js" defer></script>
  </body>
</html>
